<div>
  <p-toast></p-toast>
  <div class="profile-container">
    <div class="title_container_profil">
      <h1 class="title">{{ 'MY-PROFILE' | translate }}</h1>
    </div>
    <div class="profile-form">
      <form [formGroup]="profileForm">
        <div class="form-group-row">
          <!-- Nom et prénom -->
          <div class="form-group">
            <label for="lastName">{{ 'LASTNAME' | translate }}</label>
            <input
              id="lastName"
              formControlName="lastName"
              type="text"
              pInputText
              [disabled]="!editable"
            />
            <div *ngIf="profileForm.controls['lastName'].invalid && profileForm.controls['lastName'].touched">
              <small class="error">{{ 'REQUIRED_FIELD' | translate }}</small>
            </div>
          </div>

          <div class="form-group">
            <label for="firstName">{{ 'FIRSTNAME' | translate }}</label>
            <input
              id="firstName"
              formControlName="firstName"
              type="text"
              pInputText
              [disabled]="!editable"
            />
            <div *ngIf="profileForm.controls['firstName'].invalid && profileForm.controls['firstName'].touched">
              <small class="error">{{ 'REQUIRED_FIELD' | translate }}</small>
            </div>
          </div>
        </div>

        <div class="form-group-row">
          <!-- Email et téléphone -->
          <div class="form-group">
            <label for="email">{{ 'EMAIL' | translate }}</label>
            <input
              id="email"
              formControlName="email"
              type="email"
              pInputText
              [attr.disabled]="true"
              [attr.readonly]="true"
              [disabled]="false"
            />
            <div *ngIf="profileForm.controls['email'].invalid && profileForm.controls['email'].touched">
              <small class="error">{{ 'REQUIRED_FIELD' | translate }}</small>
            </div>
          </div>

          <div class="form-group">
            <label for="phoneNumber">{{ 'PHONE_NUMBER' | translate }}</label>
            <input
              id="phoneNumber"
              formControlName="phoneNumber"
              type="text"
              pInputText
              [disabled]="!editable"
            />
            <div *ngIf="profileForm.controls['phoneNumber'].invalid && profileForm.controls['phoneNumber'].touched">
              <small class="error">{{ 'INVALID_PHONE' | translate }}</small>
            </div>
          </div>
        </div>

        <div class="form-group-row">
          <!-- Date de naissance -->
          <div class="form-group">
            <label for="dateOfBirth">{{ 'DATE_OF_BIRTH' | translate }}</label>
            <p-datepicker
              class="dateInput"
              id="dateOfBirth"
              formControlName="dateOfBirth"
              [showIcon]="true"
              dateFormat="dd.mm.yy"
              class="full-width-input"
              [disabled]="!editable"
            ></p-datepicker>
            <div *ngIf="profileForm.controls['dateOfBirth'].invalid && profileForm.controls['dateOfBirth'].touched">
              <small class="error">{{ 'DATE_REQUIRED' | translate }}</small>
            </div>
            <div *ngIf="profileForm.get('dateOfBirth')?.hasError('invalidDate') && profileForm.get('dateOfBirth')?.touched">
              <small class="error">{{ 'FUTURE_DATE' | translate }}</small>
            </div>
          </div>

          <!-- Revenu annuel -->
          <div class="form-group">
            <label for="annualIncome">{{ 'ANNUAL_INCOME' | translate }}</label>
            <input
              id="annualIncome"
              formControlName="annualIncome"
              type="number"
              pInputText
              [disabled]="!editable"
            />
            <div *ngIf="profileForm.controls['annualIncome'].invalid && profileForm.controls['annualIncome'].touched">
              <small class="error">{{ 'POSITIVE_INCOME' | translate }}</small>
            </div>
          </div>
        </div>

        <div class="form-group-row">
          <!-- Statut marital et enfants -->
          <div class="form-group">
            <label for="maritalStatus">{{ 'MARITAL_STATUS' | translate }}</label>
            <p-dropdown
              id="maritalStatus"
              formControlName="maritalStatus"
              [options]="maritalStatuses"
              placeholder="{{ 'SELECT' | translate }}"
              [disabled]="!editable"
            ></p-dropdown>
            <div *ngIf="profileForm.controls['maritalStatus'].invalid && profileForm.controls['maritalStatus'].touched">
              <small class="error">{{ 'REQUIRED_FIELD' | translate }}</small>
            </div>
          </div>

          <div class="form-group">
            <label for="numberOfChildren">{{ 'NUMBER_OF_CHILDREN' | translate }}</label>
            <input
              id="numberOfChildren"
              formControlName="numberOfChildren"
              type="number"
              pInputText
              [disabled]="!editable"
            />
            <div *ngIf="profileForm.controls['numberOfChildren'].invalid && profileForm.controls['numberOfChildren'].touched">
              <small class="error">{{ 'POSITIVE_INTEGER' | translate }}</small>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button
            pButton
            label="{{ 'EDIT' | translate }}"
            icon="pi pi-pencil"
            (click)="toggleEdit()"
            type="button"
            severity="secondary"
          ></button>
          <button
            pButton
            label="{{ 'VALIDATE' | translate }}"
            icon="pi pi-check"
            (click)="submitForm()"
            [disabled]="!profileForm.valid || !editable"
            type="button"
            severity="info"
          ></button>
        </div>
      </form>
    </div>
  </div>
</div>
