<div class="search-filter-container">
  <app-search-bar
    (searchTermChanged)="onSearchTermChanged($event)"
    style="flex-grow: 1"
  ></app-search-bar>
  <div>
    <i class="pi pi-sliders-h" (click)="isFilterVisible = true"></i>
  </div>
</div>

<p-sidebar
  class="filter-sidebar-custom"
  [(visible)]="isFilterVisible"
  position="right"
  [dismissible]="true"
  [showCloseIcon]="false"
>
  <div class="header_sidebar">
    <i class="pi pi-times icon_close" (click)="isFilterVisible = false"></i>
  </div>

  <div (click)="stopPropagation($event)">
    <h3>Filtrer les SCPI</h3>

    <div class="filter-section">
      <label>Taux de distribution minimum</label>
      <p-slider
        [(ngModel)]="filters.minimumDistribution"
        [min]="0"
        [max]="20"
        [step]="1"
      ></p-slider>
      <span>{{ filters.minimumDistribution }}%</span>
    </div>

    <div class="filter-section">
      <label>Zone d’investissement</label>
      <p-multiSelect
        [options]="investmentZones"
        [(ngModel)]="selectedLocations"
        optionLabel="label"
      ></p-multiSelect>
    </div>

    <div class="filter-section">
      <label>Secteurs d'investissement</label>
      <p-multiSelect
        [options]="investmentSectors"
        [(ngModel)]="selectedSectors"
        optionLabel="label"
      ></p-multiSelect>
    </div>

    <div class="filter-section">
      <label>Frais de souscription</label>
      <p-selectButton
        [options]="subscriptionFeesOptions"
        [(ngModel)]="filters.subscriptionFees"
      ></p-selectButton>
    </div>

    <div class="filter-section">
      <label>Fréquence des loyers</label>
      <p-selectButton
        [options]="rentalFrequencyOptions"
        [(ngModel)]="filters.frequencyPayment"
      ></p-selectButton>
    </div>

    <div class="filter-section">
      <label>Montant minimum d’investissement</label>
      <p-slider
        [(ngModel)]="filters.minimumInvestmentAmount"
        [min]="0"
        [max]="10000"
        [step]="100"
      ></p-slider>
      <span>{{ filters.minimumInvestmentAmount }} €</span>
    </div>

    <div class="button-container">
      <p-button
        label="Rechercher"
        icon="pi pi-arrow-right"
        [disabled]="isSearchDisabled()"
        severity="info"
        (click)="searchScpi()"
      ></p-button>

      <p-button
        label="Réinitialiser"
        icon="pi pi-refresh"
        severity="danger"
        (click)="resetFilters()"
        class="reset-button"
      ></p-button>
    </div>
  </div>
</p-sidebar>
